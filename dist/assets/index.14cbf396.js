import{D as te,S as k,V as f,H as ce,M as Z,T as I,P as D,C as v,a as w,b as ie,A as b,c as V,d as de,e as me,f as ue,R as ge,g as pe,B as fe,W as R,E as j,h as ye,i as q,j as be,k as Me,l as Ce,U as Se,m as xe,n as Pe,F as we,o as Ae,p as ve,q as Oe}from"./vendor.188d3d72.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))t(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&t(r)}).observe(document,{childList:!0,subtree:!0});function i(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerpolicy&&(n.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?n.credentials="include":s.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function t(s){if(s.ep)return;s.ep=!0;const n=i(s);fetch(s.href,n)}})();window.exports=window;class Ie{complete=!1;title;description;failed=!1;onFail;onSuccess;onCompletion;currentState;tasks;constructor(e,i,t,s=0){this.title=e,this.description=i,this.tasks=t,this.currentState=s}resetSOP=()=>{this.currentState=0,this.failed=!1,this.complete=!1}}const z="./",N=60,se=50,ne=3,O="cylinder",B="liquid",Te="placard",M=new Ie("","",[{next:"CtoA",label:"BtoC"},{next:"complete",label:"CtoA"}]);function U(d,e,i){const t=d.find(h=>h.name==="__root__"),s=t.getScene();t.name=i;const n=d.find(h=>h.name==="Label"),r=d.find(h=>h.name==="Placard");r.name=Te;const o=new te("dynamic texture",256,s);o.wAng=-Math.PI/2,o.uAng=Math.PI;const a=new k("Mat",s);a.diffuseTexture=o,n.material=a;const m="bold 220px monospace";o.drawText(t.name.split("-")[1].toUpperCase(),65,185,m,"black","white"),r.addChild(n),r.rotationQuaternion=null,r.rotation=new f(0,Math.PI/2,0);const u=s.getMeshByName("Table");if(u){const h=u.getBoundingInfo().boundingBox;t.position.y=h.maximumWorld.y+.003,t.position.x=(h.maximumWorld.x-h.minimumWorld.x)/ne*e+h.minimumWorld.x-.2,t.position.z=(h.centerWorld.z+h.minimumWorld.z)/2+.2}}function P(d,e){return d.getChildMeshes().find(i=>i.name===e)||null}function L(d){d.rotation.x=0,d.rotation.y=0,d.rotation.z=0}class K{name;position;mesh;dragCollision;highlightLayer;scene;particleSystem;currentColor;originalColor;startOpacity;toggleControllers;startPos;EllipsoidLines;moveFlag;pourLocations;rotateEnd;startRotation;dropped;constructor(e,i,t,s){this.name=t,this.moveFlag=!0,this.rotateEnd=!0,this.dropped=!1,this.currentColor=Object.assign({},s),this.originalColor=Object.assign({},s),this.startOpacity=.7;const n=e.getScene();this.scene=n,this.highlightLayer=new ce("highlight-layer",n),this.highlightLayer.innerGlow=!0,this.highlightLayer.outerGlow=!1;const r=n.getMeshByName("Table");let o=.1,a=Z.CreateCylinder(`pivot-Cylinder-${t}`,{diameterTop:o,height:.33,diameterBottom:o},e.getScene());if(a.position._y+=.1,a.visibility=0,e.name=t,e.parent=a,e.rotationQuaternion=null,e.getChildMeshes().forEach(S=>{switch(S.name){case"BeakerwOpacity":S.name=O,S.rotationQuaternion=null,S.rotation.z=2*Math.PI,S.isPickable=!1;break;case"BeakerLiquid":S.name=B,S.isPickable=!1;break}}),r){const S=r.getBoundingInfo().boundingBox,A=P(e,O).getBoundingInfo().boundingBox.maximum.y;a.position.y=S.maximumWorld.y+A/2+.0075,a.position.x=(S.maximumWorld.x-S.minimumWorld.x)/ne*i+S.minimumWorld.x-.3,a.position.z=(S.centerWorld.z+S.minimumWorld.z)/2,this.position={...a.position}}else a.position.x=-2+i,a.position.y=1.22,a.position.z=.5;a.checkCollisions=!0,a.ellipsoid=new f(.02,.05,.02),this.startPos=Object.assign({},a.position),this.mesh=a,this.startRotation=Object.assign({},this.mesh.rotation);const m=P(e,B),u=new k("liquid-material");u.diffuseColor=s,m.material=u;const h=P(e,"Label"),p=P(e,"LabelBack"),g=new te("dynamic texture",256,n,!0,I.LINEAR_LINEAR_MIPNEAREST);g.uAng=Math.PI;const c=new k("Mat",n);c.diffuseTexture=g,h.material=c,p.material=c;const y="bold 250px monospace";g.drawText(e.name.toUpperCase(),0,225,y,"black","white");let x=this.mesh.getChildMeshes().find(S=>S.name==="cylinder");this.mesh.animations=x.animations;const C=new D("particles",500,this.scene);C.particleTexture=new I("https://raw.githubusercontent.com/PatrickRyanMS/BabylonJStextures/master/FFV/smokeParticleTexture.png",this.scene),C.minLifeTime=.5,C.maxLifeTime=.7,C.emitRate=100,C.gravity=new f(0,.5,0),C.minSize=.01,C.maxSize=.07,C.createPointEmitter(new f(0,0,0),new f(0,1,0)),C.addColorGradient(1,v.FromColor3(m.material.diffuseColor,1)),C.blendMode=D.BLENDMODE_STANDARD,C.emitter=this.mesh.position,this.particleSystem=C,this.setOpacity(this.startOpacity),this.addDragCollision()}startParticles(){this.particleSystem.start()}highlight(e=!0){let i=P(this.mesh,O);e?this.highlightLayer.hasMesh(i)||this.highlightLayer.addMesh(i,w.Green()):this.highlightLayer.hasMesh(i)&&this.highlightLayer.removeMesh(i)}addDragCollision(){let e=new ie({dragPlaneNormal:new f(0,0,1)});e.useObjectOrientationForDragging=!1,e.moveAttached=!1,e.onDragObservable.add(i=>{i.delta!=f.Zero()&&this.moveFlag&&this.mesh.isPickable&&this.mesh.moveWithCollisions(i.delta)}),e.onDragEndObservable.add(()=>{f.Distance(this.startPos,this.mesh.position)>.1?this.rotateEnd?(this.scene.stopAllAnimations(),this.fadeAndRespawn()):setTimeout(()=>{this.scene.stopAllAnimations(),this.fadeAndRespawn()},1e3):(this.mesh.position.x=this.position._x,this.mesh.position.y=this.position._y,this.mesh.position.z=this.position._z)}),this.mesh.addBehavior(e),this.dragCollision=e}removeDragCollision(){this.mesh.removeBehavior(this.dragCollision)}fadeAndRespawn(e=se,i=null,t=!0){this.mesh.isPickable=!1,setTimeout(()=>{let s=this.mesh.getBehaviorByName("PointerDrag");s&&s.releaseDrag();let n=30;this.mesh.name.split("-")[0];let r=this.mesh.getScene(),o=this.mesh.getChildMeshes(),a=o.find(h=>h.name==="cylinder");o.find(h=>h.name==="liquid");let u=[{name:"Invisibility",startValue:P(this.mesh,B).visibility},{name:"Visibility",startValue:0}];u.forEach(h=>{h.init=new b(h.name,"visibility",120,b.ANIMATIONTYPE_FLOAT,b.ANIMATIONLOOPMODE_CONSTANT),h.init.setKeys([{frame:0,value:h.startValue},{frame:n,value:h.startValue===0?this.startOpacity:0}])});for(let h=0;h<o.length-1;++h){let p=o[h];r.beginDirectAnimation(p,[u[0].init],0,60,!1)}r.beginDirectAnimation(o[o.length-1],[u[0].init],0,60,!1,void 0,()=>{let h=P(this.mesh,O);L(this.mesh),L(h),this.mesh.position.x=this.position._x,this.mesh.position.y=this.position._y,this.mesh.position.z=this.position._z,this.mesh.animations=a.animations;for(let p=0;p<o.length-1;++p){let g=o[p];r.beginDirectAnimation(g,[u[1].init],0,60,!1)}r.beginDirectAnimation(o[o.length-1],[u[1].init],0,60,!1,void 0,()=>{if(this.highlight(!1),this.mesh.isPickable=t,P(this.mesh,"cylinder").visibility=this.startOpacity,i)for(let p of i)p&&(p.handMesh.visibility=1)})})},e)}rotateAnimation(e,i=null,t=!1){Object.assign({},this.mesh.position),this.mesh.checkCollisions=!1;let s=this.mesh.getAnimationByName(`${this.name}-${e}`);t||(this.moveFlag=!1,this.rotateEnd=!1,i&&(i.holdingMesh=null)),this.toggleControllers&&this.toggleControllers(),this.scene.beginDirectAnimation(this.mesh,[s],0,600,!1,.5,()=>{this.toggleControllers&&this.toggleControllers(),t||(this.moveFlag=!0,this.rotateEnd=!0,i&&(i.holdingMesh=this.mesh)),this.mesh.checkCollisions=!0})}setColor(e){const i=P(this.mesh,B),t=new k("liquid-material");t.diffuseColor=e,i.material=t,this.currentColor=e}setOpacity(e){const i=P(this.mesh,B);i.visibility=e}resetProperties(){this.setOpacity(this.startOpacity),this.setColor(this.originalColor),L(this.mesh),L(P(this.mesh,O))}showEffects(e=!1){if(e){this.particleSystem.particleTexture=new I("https://raw.githubusercontent.com/PatrickRyanMS/BabylonJStextures/master/FFV/smokeParticleTexture.png",this.scene),this.particleSystem.minLifeTime=.5,this.particleSystem.maxLifeTime=.7,this.particleSystem.emitRate=100,this.particleSystem.gravity=new f(0,.5,0),this.particleSystem.minSize=.01,this.particleSystem.maxSize=.07,this.particleSystem.createPointEmitter(new f(0,0,0),new f(0,1,0));const i=P(this.mesh,B);this.particleSystem.addColorGradient(1,v.FromColor3(i.material.diffuseColor,1)),this.particleSystem.blendMode=D.BLENDMODE_STANDARD,this.particleSystem.emitter=this.mesh.position,this.particleSystem.start()}else this.particleSystem.stop()}}function Ee(d){}class Ne{doorMesh;scene;onPointerDownObserver;animations;animating;state;constructor(e){console.log(e[0]),this.scene=e[0].getScene(),console.log(this.scene),e.find(o=>o.name==="FireExtinguisherCabinet"),this.doorMesh=e.find(o=>o.name==="Door"),this.doorMesh.rotationQuaternion=null,this.animations=[];let i=new b("rotateAroundY","rotation.y",60,b.ANIMATIONTYPE_FLOAT,b.ANIMATIONLOOPMODE_CONSTANT),t=[],s={value:0},n={value:-Math.PI/2};t.push({...s,frame:0}),t.push({...n,frame:60}),this.doorMesh.animations.push(i),i.setKeys(t),this.animations.push(i);let r=new b("resetAroundY","rotation.y",60,b.ANIMATIONTYPE_FLOAT,b.ANIMATIONLOOPMODE_CONSTANT);t=[],t.push({...n,frame:0}),t.push({...s,frame:60}),this.doorMesh.animations.push(r),r.setKeys(t),this.animations.push(r),this.onPointerDownObserver=this.scene.onPointerObservable.add(this.rotateAroundY),this.animating=!1,this.state=!0}rotateAroundY=(e={type:V.POINTERDOWN,pickInfo:{pickedMesh:this.doorMesh}})=>{if(e.type===V.POINTERDOWN){const i=e.pickInfo?.pickedMesh;if(!this.animating&&i&&(i===this.doorMesh||i.isDescendantOf(this.doorMesh))){this.animating=!0;let t;console.log("Click!"),this.state===!0?t=this.animations[0]:t=this.animations[1],this.scene.beginDirectAnimation(this.doorMesh,[t],0,60,!1,1.5,()=>{this.animating=!1,this.state=!this.state})}}}}const Be="Stony Brook University VR Laboratory",ke="Victor Ruben",Le="VR Chemical Mixture Synthesis",De="4/1/2023",Re="General: Properly mixing VR chemicals",Fe="42",_e="I",We=[{text:"HAZARD IDENTIFICATION",sublistType:"a",sublist:[{text:"Improper mixing of chemicals can lead to explosive results!"}]},{text:"CHEMICAL HANDLING PROCEDURES",sublistType:"a",sublist:[{text:"When mixing these chemicals - always follow the correct sequence"},{text:"Pour chemical B into chemical C"},{text:"Then pour chemical mixture B+C into chemical A"}]},{text:"EMERGENCY PROCEDURES",sublistType:"a",sublist:[{text:"In the event of an improper mixture - use the fire extinguisher to put out the flames"},{text:"Evacuate the lab"},{text:"Call for emergency services"}]}],ze={facility:Be,labDirector:ke,scope:Le,lastRevision:De,general:Re,sopNum:Fe,listType:_e,items:We};function Ve(d){d.name="clipboard";const e=d.getScene(),i=e.getMeshByName("Table");if(i){const r=i.getBoundingInfo().boundingBox;d.position.y=r.maximumWorld.y+.003}d.rotationQuaternion=null,d.rotation=new f(0,Math.PI/4,0);const t=e.getMeshByName("pivot-Cylinder-A");t&&(d.position.x=t.position.x+.2,d.position.z=t.position.z+.5);function s(r){let o=document.createElement("template");o.innerHTML=r;var a=de.compile(o.innerHTML),m=a(ze);return o.innerHTML=m,o.content}function n(r){const a="data:image/svg+xml;utf8,"+encodeURIComponent(r),m=I.LoadFromDataString("tex",a,e,void 0,void 0,void 0,I.LINEAR_LINEAR_MIPNEAREST);let u=new k("mat",e);u.diffuseTexture=m,m.uScale=1,m.vScale=-1,u.emissiveColor=w.White(),u.useAlphaFromDiffuseTexture=!0,m.hasAlpha=!0;let h=P(d,"Plane");h.material=u}fetch(`${z}images/sopTemplate.svg`).then(r=>r.text()).then(r=>{let o=s(r);o.getElementById("procedure-list");const m=new XMLSerializer().serializeToString(o);n(m)}).catch(console.error.bind(console))}class He{rect;text;button;constructor(e,i,t){this.rect=e,this.text=i,this.button=t}setVisible(e=!0){this.rect.isVisible=e,this.text.isVisible=e,this.button.isVisible=e}}class Ge{advancedTexture;welcomePrompt;gameFinishPrompt;camera;screen;scene;constructor(e){this.scene=e,this.camera=e.activeCamera}createPromptWithButton(e,i=null,t=null,...s){this.screen=Z.CreatePlane("Start",{size:1}),this.screen.parent=this.camera,this.screen.position=this.camera.position.add(new f(.6,-1.5,2.75)),this.advancedTexture=me.CreateForMesh(this.screen);let n=new ue("container");var r=new ge;r.width=.5,r.height=.2,r.color="cyan",r.thickness=4,r.background="white",n.addControl(r);var o=new pe;o.text=e,o.color="black",o.fontSize="17px",o.resizeToFit=!0,o.textWrapping=!0,o.paddingBottomInPixels=40,o.paddingLeftInPixels=15,o.paddingRightInPixels=15,r.addControl(o);var a=fe.CreateSimpleButton("but1","Click to dismiss");a.width="150px",a.height="40px",a.color="black",a.cornerRadius=20,a.background="white",a.topInPixels=40;let m=new He(r,o,a),u=this.scene.getMeshByName("Start");document.getElementsByTagName("canvas")[0].addEventListener("pointerdown",function(){i.baseExperience.onStateChangedObservable.add(g=>{g===R.IN_XR&&p()})});function p(){n.dispose(),u.dispose(),t&&t(...s),i&&(i.pointerSelection.displayLaserPointer=!1,i.pointerSelection.displaySelectionMesh=!1)}return m.button.onPointerUpObservable.add(function(){p()}),m.button.onPointerEnterObservable.add(()=>{a.background="grey"}),m.button.onPointerOutObservable.add(()=>{a.background="white"}),n.addControl(m.button),n.addControl(a),this.advancedTexture.addControl(n),m}}class $e{soundList;soundPointer;scene;loadedSounds;constructor(e,i){this.scene=i,this.soundPointer=0,this.soundList=e,this.loadedSounds={}}enableAudio(){j.audioEngine.useCustomUnlockedButton=!0}async loadSounds(){let e=[];return new Promise(i=>{let t=0;this.soundList.forEach(s=>{if(e.push({soundName:s.soundName,sound:new ye(s.soundName,s.fileName,this.scene,()=>{},{})}),t++,t===this.soundList.length){for(let n of e)this.loadedSounds[n.soundName]=n.sound;i(e)}})})}}class Ye{flying=!1;active=!1;camera;mesh;offset=.4;animations;returnPosition;returnRotation;onPointerDownObserver;xrCamera;constructor(e){const i=new b("translate","position",N,b.ANIMATIONTYPE_VECTOR3),t=new b("rotate","rotation",N,b.ANIMATIONTYPE_VECTOR3);this.animations=[i,t],this.xrCamera=e}get name(){return"FlyToCamera"}init(){}attach=(e,i,t,s,n)=>{const r=e.getScene();if(this.mesh=e,!i&&(i=r.activeCamera,!i))throw new Error("The scene has no active camera, and no camera was provided.");this.camera=i,t||(t=this.mesh.position),s||(s=this.mesh.rotation),n&&(this.offset=n),this.returnPosition=t,this.returnRotation=s,this.onPointerDownObserver=r.onPointerObservable.add(this.clipboardClick)};detach=()=>{this.mesh.getScene().onPointerObservable.remove(this.onPointerDownObserver)};clipboardClick=(e={type:V.POINTERDOWN,pickInfo:{pickedMesh:this.mesh}})=>{if(e.type===V.POINTERDOWN){const i=e.pickInfo?.pickedMesh;if(i&&(i===this.mesh||i.isDescendantOf(this.mesh))&&!this.flying||this.active){const t=this.active?N/2:0,s=this.active?0:N/2;this.#e(),this.flying=!0,this.mesh.billboardMode==q.BILLBOARDMODE_ALL?this.mesh.billboardMode=q.BILLBOARDMODE_NONE:this.mesh.billboardMode=q.BILLBOARDMODE_ALL,this.mesh.getScene().beginDirectAnimation(this.mesh,this.animations,t,s,!1,void 0,()=>{this.flying=!1,this.active=!this.active})}}};calculateTargetPositionWithOffset=e=>{if(this.xrCamera!==void 0&&this.xrCamera.state===R.IN_XR){const r=this.xrCamera.camera._position.subtract(this.returnPosition).scale(1-e/f.Distance(this.returnPosition,this.xrCamera.camera._position));return this.returnPosition.add(r)}const t=this.camera._position.subtract(this.returnPosition).scale(1-e/f.Distance(this.returnPosition,this.camera._position));return this.returnPosition.add(t)};setClipboardUp=()=>new f(3.1468286,4.6617744,1.680752);#e=()=>{const e=this.animations.find(({name:n})=>n==="translate"),i=this.animations.find(({name:n})=>n==="rotate"),t=[{frame:0,value:this.returnPosition},{frame:N/2,value:this.calculateTargetPositionWithOffset(this.offset)}],s=[{frame:0,value:this.returnRotation},{frame:N/2,value:this.setClipboardUp()}];e.setKeys(t),i.setKeys(s)}}class ae{cylinderInstances;clipboard;isRotating;scene;labels;guiManager;soundManager;xrCamera;constructor(e,i,t,s,n){this.labels=["A","B","C"],this.scene=e,this.cylinderInstances=i,this.guiManager=t,this.soundManager=s,this.xrCamera=n,this.isRotating=!1}getCylinderInstanceFromMesh(e){let i=e.name.split("-")[2];for(let t of this.cylinderInstances)if(t.name==i)return t;return null}intersectHandCylinder(e){for(let i of this.labels){let t=this.scene.getMeshByName(`pivot-Cylinder-${i}`);if(e.intersectsMesh(t,!1)&&t.isPickable)return t}return null}intersectCylinder(e){for(let i of this.labels){let t=this.scene.getMeshByName(`pivot-Cylinder-${i}`);if(t!=e&&e.intersectsMesh(t))return t}return null}highlightCylinders(e,i){e.highlight(),i.highlight()}RotateCylinders(e,i,t=null){let s=e.mesh.position,n=i.mesh.position,r="rotateAroundZleft";i.mesh.rotation.y=e.mesh.rotation.y;let o=e.mesh.getHierarchyBoundingVectors(),a=o.max.y-o.min.y,m=.2,u=n.x;s.x-u;let h=P(e.mesh,O),p=P(i.mesh,O);n.x<s.x?h.rotation.y=Math.PI:(h.rotation.y=0,r="rotateAroundZright",m=-m),p.rotation.y=h.rotation.y,e.mesh.position.x=i.mesh.position.x+m,e.mesh.position.y=i.mesh.position.y+a/1.5,e.rotateAnimation(r,t)}moveWithCollisions(e,i){e.moveWithCollisions(i)}addColors(e,i){let t=e.currentColor,s=i.currentColor,n=new w((t.r+s.r)/2,(t.g+s.g)/2,(t.b+s.b)/2);i.setColor(n)}showFinishScreen(){for(let i of this.cylinderInstances)i.mesh.isPickable=!1,i.moveFlag=!1;function e(i){for(let t of i)t.mesh.isPickable=!0,t.moveFlag=!0,t.resetProperties(),t.showEffects(!1),setTimeout(()=>{t.setColor(t.originalColor)},1e3)}this.guiManager.createPromptWithButton("You have completed the task! The scene will now reset!",this.xrCamera,e,this.cylinderInstances)}showFailureScreen(){for(let i of this.cylinderInstances)i.mesh.isPickable=!1;function e(i){for(let t of i)t.mesh.isPickable=!0,t.moveFlag=!0,t.resetProperties(),t.showEffects(!1),setTimeout(()=>{t.setColor(t.originalColor)},1e3)}this.guiManager.createPromptWithButton("Task failed! The scene will now reset.",this.xrCamera,e,this.cylinderInstances)}playExplosion(){let e=this.soundManager.loadedSounds.explosion;e.stop(),e.play()}playDing(){let e=this.soundManager.loadedSounds.ding;e.stop(),e.play()}playSuccess(){let e=this.soundManager.loadedSounds.success;e.stop(),e.play()}}class oe extends ae{particleSystem;instances;fireExtinguisher;constructor(e,i,t,s,n,r){super(e,i,t,s,n),this.instances=i,this.fireExtinguisher=r}resetCylinders(){this.particleSystem&&this.particleSystem.stop();let e=["A","B","C"];for(let i=0;i<e.length;i++){const t=this.scene.getMeshByName(`pivot-Cylinder-${e[i]}`),s=this.scene.getMeshByName("Table");if(s&&t){const n=s.getBoundingInfo().boundingBox;t.position.z=(n.centerWorld.z+n.minimumWorld.z)/2}super.getCylinderInstanceFromMesh(t).showEffects(!1),super.getCylinderInstanceFromMesh(t).resetProperties(),super.getCylinderInstanceFromMesh(t).setColor(super.getCylinderInstanceFromMesh(t).originalColor),i==0&&(super.getCylinderInstanceFromMesh(t).setColor(w.Red()),super.getCylinderInstanceFromMesh(t).currentColor=w.Red())}}postSceneCylinder(){let e=["A","B","C"],i=[];for(let s of e){const n=this.scene.getMeshByName(`pivot-Cylinder-${s}`);i.push(n);let r=new b(`${s}-rotateAroundZleft`,"rotation.z",120,b.ANIMATIONTYPE_FLOAT,b.ANIMATIONLOOPMODE_CONSTANT),o=P(n,O),a=[];a.push({frame:0,value:0}),a.push({frame:60,value:Math.PI/2}),o.animations.push(r),r.setKeys(a);let m=new b(`${s}-rotateAroundZright`,"rotation.z",120,b.ANIMATIONTYPE_FLOAT,b.ANIMATIONLOOPMODE_CONSTANT);a=[],a.push({frame:0,value:0}),a.push({frame:60,value:-Math.PI/2}),o.animations.push(m),m.setKeys(a);let u=new b(`${s}-resetRotateAroundZleft`,"rotation.z",120,b.ANIMATIONTYPE_FLOAT,b.ANIMATIONLOOPMODE_CONSTANT),h=[];h.push({frame:0,value:Math.PI/2}),h.push({frame:60,value:0}),o.animations.push(u),u.setKeys(h);let p=new b(`${s}-resetRotateAroundZright`,"rotation.z",120,b.ANIMATIONTYPE_FLOAT,b.ANIMATIONLOOPMODE_CONSTANT);h=[],h.push({frame:0,value:-Math.PI/2}),h.push({frame:60,value:0}),o.animations.push(p),p.setKeys(h)}let t;for(let s=0;s<e.length;s++){const n=this.scene.getMeshByName(`pivot-Cylinder-${e[s]}`);let r=super.getCylinderInstanceFromMesh(n);const o=n.getBehaviorByName("PointerDrag");let a=[];for(let y of i)y!=n&&a.push(y);let m=!1,u=!1,h=P(n,O),p=!1,g="resetRotateAroundZleft";this.fireExtinguisher.pointerDragBehav.onDragEndObservable.add(()=>{this.fireExtinguisher.fireExtinguished&&(console.log("Here!!!"),super.showFailureScreen(),M.resetSOP(),m=!1,this.fireExtinguisher.fireExtinguished=!1)});let c;n.isPickable&&o.onDragObservable.add(()=>{let y=!1,l=!1;L(n);let x;const C=super.intersectCylinder(n);C&&(x=super.getCylinderInstanceFromMesh(C),t=x,super.highlightCylinders(r,x),l=!0,C.name.split("-")[2],n.name.split("-")[2],p||(p=!0,c=setTimeout(()=>{super.RotateCylinders(r,x);let S=C.name.split("-")[2],T=`${n.name.split("-")[2]}to${S}`;if(M.tasks[M.currentState].label===T)u=!0,M.tasks[M.currentState].next==="complete"?(y=!0,setTimeout(()=>{super.playSuccess()},500),setTimeout(()=>{r.fadeAndRespawn()},1500),M.resetSOP(),this.resetCylinders(),super.showFinishScreen()):(M.currentState=M.tasks.indexOf(M.tasks.find(A=>A.label==M.tasks[M.currentState].next)),super.playDing());else if(!m&&!u){for(let A of this.instances)A.mesh.isPickable=!1,A.moveFlag=!1;M.failed=!0,x.showEffects(!0),setTimeout(()=>{super.playExplosion()},800),setTimeout(()=>x.showEffects(!1),1e3),m=!0,setTimeout(()=>{o.releaseDrag(),this.scene.getMeshByName("fireplane").isVisible=!0},1500)}y||super.addColors(r,x),C.position.x>n.position.x&&(g="resetRotateAroundZright")},700))),l===!1&&r.rotateEnd&&(r.highlight(!1),t&&(t.highlight(!1),t=void 0),c?(clearTimeout(c),c=null,u=!1,p=!1):(u=!1,p&&(p=!1,r.rotateAnimation(g,null,!0))))}),o.onDragEndObservable.add(()=>{p=!1;for(let y of a)y!==h&&(r.highlight(!1),super.getCylinderInstanceFromMesh(y).highlight(!1),h.intersectsMesh(y)&&(r.rotateAnimation(g),h.position.x=0,h.position.y=0))})}}}class ee extends ae{handedness;holdingInstance;holdingMesh;targetMesh;targetMeshInstance;motionController;handMesh;isVisible;failBeaker;particleSystem;cylinderInstancesHand;constructor(e,i,t,s,n,r){super(i,t,s,n,r),this.handedness=e,this.handMesh=i.getMeshByName(this.handedness),this.isVisible=!0,this.failBeaker=!1}getMotionController(){return this.motionController}setMotionController(e){this.motionController=e}dropped(e=null,i=!0){f.Distance(this.holdingInstance.mesh.position,this.holdingInstance.startPos)==0&&(i=!1),this.motionController.lastPosition=null,e&&clearInterval(e),this.motionController.grabbed=!1,this.motionController.meshGrabbed=void 0,this.holdingMesh&&(i&&this.holdingInstance.fadeAndRespawn(100,null,this.holdingMesh.isPickable),this.holdingMesh=null,this.holdingInstance=null,this.motionController.meshGrabbed=null)}updateSOPTask(e,i){let t=`${e}to${i}`;if(M.tasks[M.currentState].label===t)if(M.tasks[M.currentState].next==="complete"){new oe(this.scene,this.cylinderInstances,this.guiManager,this.soundManager,this.xrCamera);for(let s of this.cylinderInstances)s.moveFlag=!1,s.mesh.isPickable=!1;setTimeout(()=>{for(let s of this.cylinderInstances)s.fadeAndRespawn(100,null,!1);if(super.playSuccess(),this.disappearAnimation(!1),this.xrCamera.baseExperience.state==R.IN_XR){super.showFinishScreen();let s=this.scene.getMeshByName("Start");if(s){let n=this.xrCamera.baseExperience.camera;s.parent=n,s.position=n.position.add(new f(-n.position.x,-1.5,1.15)),s.position.x=0,s.position.y=0,s.position.z=.95,this.xrCamera.pointerSelection.displayLaserPointer=!0,this.xrCamera.pointerSelection.displaySelectionMesh=!0,s.rotation=f.Zero()}}},1e3),M.resetSOP(),this.particleSystem&&this.particleSystem.stop();for(let s of this.cylinderInstances)s.showEffects(!1);return!0}else{super.playDing(),M.currentState=M.tasks.indexOf(M.tasks.find(s=>s.label==M.tasks[M.currentState].next));return}else this.failBeaker||(setTimeout(()=>{if(this.xrCamera.baseExperience.state==R.IN_XR){super.showFailureScreen();let s=this.scene.getMeshByName("Start");if(s){let n=this.xrCamera.baseExperience.camera;s.parent=n,s.position=n.position.add(new f(-n.position.x,-1.5,1.15)),this.xrCamera.pointerSelection.displayLaserPointer=!0,this.xrCamera.pointerSelection.displaySelectionMesh=!0,s.position.x=0,s.position.y=0,s.position.z=.95,console.log(s),s.rotation=f.Zero()}}super.playExplosion(),this.targetMeshInstance.showEffects(!0)},1e3),M.resetSOP())}disappearAnimation(e=!0){let i=60,t=[{name:"Invisibility",startValue:1},{name:"Visibility",startValue:0}];t.forEach(s=>{s.init=new b(s.name,"visibility",120,b.ANIMATIONTYPE_FLOAT,b.ANIMATIONLOOPMODE_CONSTANT),s.init.setKeys([{frame:0,value:s.startValue},{frame:i,value:1-s.startValue}])}),e?(this.isVisible=!1,this.scene.beginDirectAnimation(this.handMesh,[t[0].init],0,60,!1)):(this.isVisible=!0,this.scene.beginDirectAnimation(this.handMesh,[t[1].init],0,60,!1))}}function qe(d,e,i,t,s,n){let r=new ee("right",d,t,s,n,e),o=new ee("left",d,t,s,n,e),a=!1,m={right:r,left:o},u=!1;function h(g){let c=g.name.split("-")[2];for(let y of t)if(y.name==c)return y;return null}let p=g=>{i(g),g.onMotionControllerInitObservable.add(c=>{let y=c;y.handID=c.handedness;let l=m[y.handedness];l.getMotionController()||l.setMotionController(y);let x=new be(f.Zero(),f.Zero(),.25);const C=c.getComponentOfType("squeeze"),S=c.getComponentOfType("trigger");c.getComponentOfType("thumbstick").onAxisValueChangedObservable.add(()=>{e.baseExperience.camera.position.y=e.baseExperience.camera.realWorldHeight}),e.baseExperience.camera.onAfterCameraTeleport.add(()=>{e.baseExperience.camera.position.y=e.baseExperience.camera.realWorldHeight}),console.log("Motion controller: ",c),[S].forEach(T=>{T.onButtonStateChangedObservable.add(A=>{d.getMeshByName("Start")||(A.value>.3&&y.handID==="right"?(e.pointerSelection.displayLaserPointer=!0,e.pointerSelection.displaySelectionMesh=!0):(e.pointerSelection.displayLaserPointer=!1,e.pointerSelection.displaySelectionMesh=!1))})}),[C].forEach(T=>{let A="resetRotateAroundZleft";T.onButtonStateChangedObservable.add(H=>{let F,re={left:"Fist",right:"Fist"},Q=d.animationGroups.find((E,Y)=>E.name===`${l.motionController.handID}_${re[l.motionController.handID]}`);Q.goToFrame(H.value*(Q._to-1)+1);let _=l.intersectHandCylinder(d.getMeshByName(y.handID)),G,$;if(H.value>.5&&!l.motionController.grabbed){if(_&&_.isPickable){j.audioEngine.unlock(),a=!1,l.holdingMesh=_,l.holdingInstance=h(l.holdingMesh),l.motionController.meshGrabbed=l.holdingMesh,l.motionController.grabbed=!0;let E=l.motionController.lastPosition,Y=x.origin;Y!=E&&(l.disappearAnimation(!0),F=setInterval(()=>{let J=l.motionController.lastPosition;if(g.getWorldPointerRayToRef(x),J&&l.holdingMesh&&l.moveWithCollisions(l.holdingMesh,Y.subtract(J)),!l.intersectHandCylinder(d.getMeshByName(l.motionController.handID))&&l.holdingMesh&&l.holdingInstance.rotateEnd&&(l.targetMeshInstance&&l.targetMeshInstance.highlight(!1),l.dropped(F),l.motionController.grabbed=!1,l.handMesh.visibility=1,a=!0,u=!1),l.holdingMesh){let W=l.intersectCylinder(l.holdingMesh);if(W){l.targetMesh=W,l.targetMeshInstance=h(W),l.highlightCylinders(l.holdingInstance,l.targetMeshInstance),l.targetMesh.position.x>l.holdingMesh.position.x&&(A="resetRotateAroundZright");let le=W.name.split("-")[2],he=l.holdingMesh.name.split("-")[2];u||(u=!0,$=setTimeout(()=>{l.addColors(l.holdingInstance,l.targetMeshInstance),a=l.updateSOPTask(he,le,F),l.holdingMesh&&(G=Object.assign({},l.holdingMesh.position)),l.RotateCylinders(l.holdingInstance,l.targetMeshInstance,l)},800))}else $&&(clearTimeout($),l.targetMeshInstance&&l.targetMeshInstance.highlight(!1),l.holdingInstance.highlight(!1),u=!1,l.holdingMesh.rotation.z!=0&&G&&Math.abs(G._x-l.holdingMesh.position.x)>.2&&(l.targetMeshInstance&&l.targetMeshInstance.highlight(!1),l.holdingInstance.highlight(!1),l.holdingInstance.rotateAnimation(A,l,!0),u=!1))}!a&&l.holdingInstance&&l.holdingInstance.rotateEnd&&(l.motionController.lastPosition=Object.assign({},x.origin),y.lastPosition=Object.assign({},x.origin))},10))}}else if((!H.value||!_)&&l.holdingInstance){let E=function(){l.holdingMesh=l.holdingInstance.mesh,l.holdingInstance.highlight(!1),l.motionController.grabbed=!1,l.targetMeshInstance&&l.targetMeshInstance.highlight(!1),l.dropped(F),l.disappearAnimation(!1),u=!1};l.holdingInstance.rotateEnd?E():setTimeout(()=>{E()},800)}})})})};return function(){let c=e.input.onControllerAddedObservable;c.hasObservers()?c.clear():c.add(p)}}function Ue(d,e,i){let t,s;return new Promise(n=>{const r="./models/";let o="";var a={};let m=["left","right"],u={left:new w(1,0,0),right:new w(0,0,1)};const h=new Me(d);m.forEach(g=>{h.addMeshTask(`load ${g} hand`,"",r,`${g}${o}.glb`)});let p=0;h.onTaskSuccess=g=>{a[m[p]]=g.loadedMeshes[1],g.loadedMeshes[1].name=m[p],t=g.loadedAnimationGroups;for(let c=0;c<t.length;c++)t[c].name=`${m[p]}_${t[c].name}`;p++},h.onTasksDoneObservable.add(()=>{for(let g=0;g<d.animationGroups.length;g++)d.animationGroups[g].pause();s=g=>{console.log(g);let c=g.inputSource.handedness;console.log(a[c]);let y=a[c].parent.parent;a[c].isPickable=!1;for(let C of i)C.removeDragCollision();let l=(Object.keys(a).indexOf(c)-1)*2-1;a[c].rotation.y=Math.PI*l,a[c].rotation.z=-Math.PI/2,a[c].rotation.x=-Math.PI/4;const x=new k("liquid-material");x.diffuseColor=u[c],a[c].material=x,y.parent=g.grip||g.pointer},e.baseExperience.onStateChangedObservable.add(g=>{if(g===R.IN_XR){e.baseExperience.camera.position.y=e.baseExperience.camera.realWorldHeight,e.baseExperience.camera.position.z=-.5;let c=d.getMeshByName("Start");if(c){let y=e.baseExperience.camera;c.parent=y,c.position=y.position.add(new f(-y.position.x,-1.5,1.15)),e.pointerSelection.displayLaserPointer=!0,e.pointerSelection.displaySelectionMesh=!0,c.position.x=0,c.position.y=0,c.position.z=.7,c.rotation=f.Zero()}}}),e.baseExperience.camera.onAfterCameraTeleport.add(()=>{e.baseExperience.camera.position.y=e.baseExperience.camera.realWorldHeight})}),h.loadAsync().then(()=>{n(s),document.getElementsByClassName("babylonVRicon")[0].addEventListener("click",c=>{console.log("hi",c);var y=new AudioContext;y.resume().then(()=>{console.log("Playback resumed successfully")})})})})}class Ke{scene;xrCamera;addHandModels;cylinders;guiManager;soundManager;constructor(e,i,t,s,n,r){this.scene=e,this.xrCamera=i,this.addHandModels=t,this.cylinders=s,this.guiManager=n,this.soundManager=r}async addWebXr(){return await Ue(this.scene,this.xrCamera,this.cylinders)}addWebXrBehaviors(){return qe(this.scene,this.xrCamera,this.addHandModels,this.cylinders,this.guiManager,this.soundManager)}}class Ze{models;cylinders;guiManager;soundManager;soundObjects;loadedSounds;scene;fireExtinguisher;constructor(e,i,t,s){this.models=e,this.cylinders=i,this.soundObjects=t,this.fireExtinguisher=s}renderScene(){this.createScene().then(e=>{this.scene=e,this.soundManager=new $e(this.soundObjects,e),this.soundManager.enableAudio(),this.soundManager.loadSounds().then(i=>{this.loadedSounds=i,this.processScene(e,this.cylinders,this.soundManager,this.fireExtinguisher)})})}disposeScene(){this.scene.meshes.forEach(e=>{e.dispose()}),this.scene.materials.forEach(e=>{e.dispose()}),this.scene.textures.forEach(e=>{e.dispose()}),this.scene.lights.forEach(e=>{e.dispose()}),this.scene.customRenderTargets.forEach(e=>{e.dispose()}),setTimeout(()=>this.scene.dispose(),1e3)}createScene(){return new Promise(e=>{const i=document.getElementById("canvas"),t=new j(i,!0,{stencil:!0}),s=new Ce(t);s.collisionsEnabled=!0,window.addEventListener("resize",function(){t.resize()});const n=new Se("camera",new f(0,1,-1.134),s);n.ellipsoid=new f(.4,.7,.4),n.attachControl(i,!0),n.applyGravity=!0,n.minZ=0,n.speed=0,n.checkCollisions=!0,n.keysUp.push(87),n.keysDown.push(83),n.keysLeft.push(65),n.keysRight.push(68);var r=new xe("light1",new f(1,1,0),s);r.intensity=0,Promise.all(this.models.map(o=>new Promise(a=>Pe.ImportMesh("",o.root,o.fileName,s,function(m){o.mesh=m,a(m)})))).then(()=>{let o=[];this.models.map(a=>{o.push(a.callback(a.mesh)),e(s)})}),window.addEventListener("keydown",o=>{o.shiftKey&&o.ctrlKey&&o.altKey&&o.keyCode===73&&(s.debugLayer.isVisible()?s.debugLayer.hide():s.debugLayer.show())}),t.runRenderLoop(()=>{s.render()})})}async processScene(e,i,t,s){let n=e.getCameraByName("camera"),r=e.getLightByName("light1"),o;n.speed=.16;let a=setInterval(()=>{r.intensity>=1?clearInterval(a):r.intensity+=.1},60),m={floorMeshes:[e.getMeshByName("Floor")],inputOptions:{doNotLoadControllerMeshes:!0}};o=await e.createDefaultXRExperienceAsync(m),o.baseExperience.camera.position.z-=.5;let u=!1;o.pointerSelection.laserPointerDefaultColor=w.Green(),o.pointerSelection.laserPointerPickedColor=w.Green(),o.pointerSelection.selectionMeshPickedColor=w.Green(),o.pointerSelection.selectionMeshDefaultColor=w.Green(),o.pointerSelection.displayLaserPointer=!1,o.pointerSelection.displaySelectionMesh=!1,window.addEventListener("keydown",p=>{p.keyCode===73&&(u?u=!1:u=!0,o.pointerSelection.displayLaserPointer=u,o.pointerSelection.displaySelectionMesh=u)});let h=new Ke(e,o,null,i,null,this.soundManager);h.addWebXr().then(p=>{if(o){const y=new Ye(o.baseExperience);e.getMeshByName("clipboard").addBehavior(y)}this.guiManager=new Ge(e),this.guiManager.createPromptWithButton("Welcome to the Lab Safety Simulation. Click on the clipboard to learn more about the simulation!",o),h.guiManager=this.guiManager,h.addHandModels=p,new oe(e,i,this.guiManager,t,o,s).postSceneCylinder();var c=h.addWebXrBehaviors();c();for(let y of i)y.toggleControllers=c})}}class je{particleSystem;constructor(e){let i=e.getScene();var t=new D("particles",500,i);t.particleTexture=new I("https://raw.githubusercontent.com/PatrickRyanMS/BabylonJStextures/master/FFV/smokeParticleTexture.png",i),t.minLifeTime=2,t.maxLifeTime=4,t.emitRate=5e3,t.gravity=new f(-200,0,0),t.addSizeGradient(.1,.75,.1),t.addColorGradient(0,new v(.5,.5,.5,0),new v(.8,.8,.8,0)),t.addColorGradient(.4,new v(.1,.1,.1,.1),new v(.4,.4,.4,.4)),t.addColorGradient(.7,new v(.03,.03,.03,.2),new v(.3,.3,.3,.4)),t.addColorGradient(1,new v(0,0,0,0),new v(.03,.03,.03,0)),t.addVelocityGradient(1,0,0),t.minInitialRotation=0,t.maxInitialRotation=Math.PI,t.minAngularSpeed=-1,t.maxAngularSpeed=1,t.blendMode=D.BLENDMODE_STANDARD,t.createSphereEmitter(.1),t.emitter=e.position,t.minEmitBox=new f(-.5,-.5,-.5),t.maxEmitBox=new f(.5,.5,.5),this.particleSystem=t}start(){this.particleSystem.start()}stop(){this.particleSystem.stop()}}class Xe{modelTransform;scene;mesh;base;startPos=new f(1.89,1,-.95);smokeSystem;fireCabinetInstance;fireExtinguished=!1;pointerDragBehav;constructor(){}setModel(e){this.mesh=e,this.scene=e.getScene(),this.modelTransform=this.scene.getTransformNodeByName("fire_ex"),this.mesh.position=this.startPos,this.mesh.isPickable=!0,console.log(this.mesh),this.addDragBehavior(),this.getChildMeshes(this.mesh),this.smokeSystem=new je(this.mesh),this.stopSmoke()}getChildMeshes(e){let i;i=e.getChildMeshes();let t=[];function s(n){for(let r of n.getChildMeshes())t.push(r),s(r)}for(let n of i)t=[n],s(n),i.concat(t);return i}addDragBehavior(){let e=new ie({dragPlaneNormal:new f(0,1,0)});e.useObjectOrientationForDragging=!1;let i;e.onDragStartObservable.add(()=>{let t=this.scene.activeCamera;i=setTimeout(()=>{t.rotation.y*=-1,this.startSmoke()},700)}),e.onDragObservable.add(()=>{let t=this.scene.getMeshByName("WallsandFloor");console.log(this.fireCabinetInstance.state),this.fireCabinetInstance.state&&this.mesh.intersectsMesh(t)&&this.mesh.isPickable&&e.releaseDrag(),M.failed&&setTimeout(()=>{this.scene.getMeshByName("fireplane").isVisible=!1,this.fireExtinguished=!0,e.releaseDrag()},8e3)}),e.onDragEndObservable.add(()=>{i&&clearTimeout(i),this.stopSmoke(),this.fadeAndRespawn()}),this.mesh.addBehavior(e),this.pointerDragBehav=e}fadeAndRespawn(){this.mesh.isPickable=!1,console.log(this.fireCabinetInstance),setTimeout(()=>{let e=this.getChildMeshes(this.mesh),i=[{name:"Invisible",startValue:1},{name:"Visible",startValue:0}];i.forEach(t=>{t.props=new b(t.name,"visibility",60,b.ANIMATIONTYPE_FLOAT,b.ANIMATIONLOOPMODE_CONSTANT),t.props.setKeys([{frame:0,value:t.startValue},{frame:60,value:t.startValue===0?1:0}])});for(let t=0;t<e.length-1;t++){let s=e[t];this.scene.beginDirectAnimation(s,[i[0].props],0,60,!1)}this.scene.beginDirectAnimation(e[e.length-1],[i[0].props],0,60,!1,void 0,()=>{this.mesh.position.x=1.89,this.mesh.position.y=1,this.mesh.position.z=-.95;for(let t=0;t<e.length-1;t++)this.scene.beginDirectAnimation(e[t],[i[1].props],0,60,!1);this.scene.beginDirectAnimation(e[e.length-1],[i[1].props],0,60,!1,void 0,()=>{this.mesh.isPickable=!0})})},se)}startSmoke(){this.smokeSystem.start()}stopSmoke(){this.smokeSystem.stop()}}class Qe{scene;plane;constructor(e){this.scene=e;var i=new we("fire",e);i.diffuseTexture=new I("images/fire.png",e),i.distortionTexture=new I("images/distortion.png",e),i.opacityTexture=new I("images/candleopacity.png",e),i.speed=5;var t=new Ae("light",new f(2,2,2),new f(-1,-2,-1),3,1,e),s=new ve(10240,t);s.usePercentageCloserFiltering=!0,s.bias=100,s.transparencyShadow=!0;let n=Z.CreatePlane("fireplane",{width:28,height:3},e);n.receiveShadows=!0,console.log(e),n.position=e.getMeshByName("ExitDoor").getAbsolutePosition(),n.scaling.x=.1,n.scaling.y=.7,n.rotationQuaternion=null,n.rotation.y=-Math.PI/2,n.position.x+=.1,n.material=i,n.material.shadowDepthWrapper=new Oe(n.material),s.getShadowMap().renderList.push(n),this.plane=n,this.hide()}show(){this.plane.isVisible=!0}hide(){this.plane.isVisible=!1}}class Je{currentScene;constructor(){}disposeCurrentScene(){this.currentScene.disposeScene()}createSceneOne(){let e,i=[],t="CylinderNewSmoothLabel.glb",s=new Xe,n=[{fileName:"room.glb",callback:a=>o(a),label:"floor"},{fileName:"Placard_Label.glb",callback:a=>U(a,1,"Placard-A")},{fileName:"Placard_Label.glb",callback:a=>U(a,2,"Placard-B")},{fileName:"Placard_Label.glb",callback:a=>U(a,3,"Placard-C")},{fileName:t,callback:a=>i.push(new K(a[0],1,"A",new w(1,0,0))),label:"Cylinder-A"},{fileName:t,callback:a=>i.push(new K(a[0],2,"B",new w(0,1,0))),label:"Cylinder-B"},{fileName:t,callback:a=>i.push(new K(a[0],3,"C",new w(0,0,1))),label:"Cylinder-C"},{fileName:"clipBoardWithPaperCompressedTextureNew.glb",callback:a=>Ve(a[0])},{fileName:"fireExtinguisher.glb",callback:a=>{let m=a[0];s.setModel(m)}}].map(function(a){return Object.assign({},{fileName:"LabBench.glb",root:"./models/",callback:Ee,label:"NoLabel"},a)}),r=[{soundName:"explosion",fileName:`${z}/sound/mi_explosion_03_hpx.mp3`},{soundName:"ding",fileName:`${z}/sound/ding-idea-40142.mp3`},{soundName:"success",fileName:`${z}/sound/success.mp3`}];this.currentScene=new Ze(n,i,r,s),this.currentScene.renderScene();function o(a){e=new Ne(a),s.fireCabinetInstance=e;const m=["WallsandFloor","Floor","Table","Roof","Countertop","Walls"];let u,h;for(let p of m){const g=a.find(c=>c.name===p);if(g&&(g.checkCollisions=!0,g.name==="Table")){const c=g.getBoundingInfo().boundingBox;c.center.x,u=g.getScene(),h=u.getCameraByName("camera"),new Qe(u),h.position=new f(c.center.x-.5,c.center.y*2+1.75,-1.5),h.rotation=new f(Math.PI/8,0,0)}}}}}console.log=()=>{};class et{constructor(){new Je().createSceneOne()}}new et;
